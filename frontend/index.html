<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Inbox</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f6f8fa; color: #333; margin:0; padding:20px; }
    h1 { text-align: center; }
    h2 { margin-top: 30px; }
    .email-list { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }
    .email-item { background: #fff; border-radius: 10px; padding: 15px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .subject { font-weight: bold; }
    .from, .to { color: #007acc; }
    .date, .flags, .attachments { font-size: 12px; color: #888; }
  </style>
</head>
<body>
  <h1>ðŸ“¬ My Email Inbox</h1>
  <div id="email-container"></div>

  <script>
    async function loadEmails() {
      const res = await fetch("http://localhost:5000/emails");
      const folders = await res.json();
      const container = document.getElementById("email-container");
      container.innerHTML = "";

      for (const [folder, emails] of Object.entries(folders)) {
        const folderDiv = document.createElement("div");
        folderDiv.innerHTML = `<h2>${folder}</h2>`;
        const listDiv = document.createElement("div");
        listDiv.classList.add("email-list");

        emails.forEach(email => {
          const div = document.createElement("div");
          div.classList.add("email-item");
          div.innerHTML = `
            <div class="subject">${email.subject}</div>
            <div class="from">From: ${email.from}</div>
            <div class="to">To: ${email.to}</div>
            <div class="date">${email.date}</div>
            <div class="flags">Flags: ${email.flags.join(", ")}</div>
            <div class="attachments">Attachments: ${email.hasAttachments ? "Yes" : "No"}</div>
          `;
          listDiv.appendChild(div);
        });

        folderDiv.appendChild(listDiv);
        container.appendChild(folderDiv);
      }
    }

    loadEmails();
  </script>
</body>
</html>
